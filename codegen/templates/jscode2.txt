<#list modules as module>

<#attempt>
function ${module.moduleName}(){
    var service=new Object();
    service.url=host+"${module.moduleUrl}";
        <#list module.interfaceInfos as interf>
        service.${interf.methodName}=function(<#list interf.parameters as parameter>${parameter.name},</#list>onSuccess)
        {
            var temp=this.url+"${interf.url}";
            <#list interf.parameters as parameter>
	        var ${parameter.name}Str=<#if parameter.isPrimitive>${parameter.name};<#else>JSON.stringify(${parameter.name});</#if>
		    </#list>
            $.ajax({
                    url:temp,
                    type:'${interf.requestType}',
                    data:{
                            <#list interf.parameters as parameter>
                            ${parameter.name}:${parameter.name}Str,
                            </#list>
                        },
                    cache:false,
                    success:onSuccess,
                    error:common.onError
                    });
        }
        </#list>
    return service;
}
<#recover>
  //Ops! The optional content is not available.
</#attempt>


</#list>